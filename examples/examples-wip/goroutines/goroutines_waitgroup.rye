wg: new-waitgroup

work: fn { id } {
    print\ssv vals { "worker" id "starting" }
    sleep 1000
    print\ssv vals { "worker" id "done" }
    wg .done
}

loop 5 { :i
    wg .add 1
    go-with i ?work
}

print "waiting for workers to finish"
wg .wait
print "finished"
